!function(){var e=document.currentScript,t=e.getAttribute("interval")||"2000",o=e.getAttribute("room")||"",n=e.getAttribute("api")||"http://localhost:8080/counter";localStorage.setItem("room",o);var r=function(){var e=new XMLHttpRequest,l=n;""!=o&&(l="".concat(n,"?room=").concat(o)),e.open("GET",l,!0);var c=localStorage.getItem("token");null!=c&&e.setRequestHeader("Authorization","Bearer "+c),e.onload=function(){if(4===e.readyState&&200===e.status){var n=JSON.parse(e.responseText);if(!0===n.success){var l=n.data;document.getElementById("online_user").innerHTML=l.online_user,document.getElementById("online_total").innerHTML=a(l.online_total),document.getElementById("online_me").innerHTML=a(l.online_me);var s=e.getResponseHeader("Set-Token");null==c&&null!=s&&localStorage.setItem("token",s),o&&o!==localStorage.getItem("room")||setTimeout(r,parseInt(t))}else alert(n.message),console.error(n.message)}},e.send()},a=function(e){var t=Math.floor(e/86400),o=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60);return"".concat(t,"d ").concat(o,"h ").concat(n,"m ").concat(r,"s")};r()}();